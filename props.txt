submit
  assignment
view

ADMIN
student maintinance
assignment maintinance
view assignments
global maintinance


type: file, peereval, question
id
description
upload messg
max filesize
num files
due date
grade visible after
filename pattern
grade mapping
post processor

section number



mkdir upload_id/username/time/
foreach fileupload {

}



use File::Copy;

print start_form(-method=>'POST',
                    -action=>$action,
                    -enctype=>$encoding);
multipart/form-data
print filefield(-name=>'uploaded_file',
                            -default=>'starting value',
                            -size=>50,
                            -maxlength=>80);

assignment
username

if ($action = none) {
  * submit assignment
  * view submitted assignments
} elif ($action eq $ASSIGNMENT_FORM) {
  if file -> print file upload form
  if eval -> print eval form
  if question -> print question form
} elif ($action eq $UPLOAD_FILES) {
  upload files then view uploads with post
} elif ($action eq $VIEW_UPLOADS) {
  print uploads
} elif ($action eq $DOWNLOAD_FILE) {
  download file
}

sub upload_files {
  foreach $p ($q->param) {
    $lightweight_fh  = $q->upload('field_name');
    # undef may be returned if it's not a valid file handle
    if (defined $lightweight_fh) {
      out = clean(filename);
      copy($lightweight_fh->handle, 'OUT');
    }
  }
  post_process
}

sub view_uploads {
  grep assignment

  username, assignment, file-links, size, date (overdue)
}

sub download_file {
  filename
}
