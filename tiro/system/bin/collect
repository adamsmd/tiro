#! /usr/bin/perl -T
use warnings; # Full warnings
use strict; # Strict error checking
$|++; # Unbuffer stdout
umask 0077; # Default to private files
delete @ENV{qw(PATH IFS CDPATH ENV BASH_ENV)}; # Make %ENV safer

# Configuration
use constant CONFIG_FILE => '../config.cfg';
use lib 'system/lib';

$ASSIGNMENT
$LASTEST
$DEST

for $user ($assignment->dir) {
  my ($latest) = sort {$b cmp $a}
  grep { not $_->failed }
  grep { $_ le $LATEST } ($assignment->user->date);

  if (defined $latest) {
    copy -r $latest $user
  }
}



users = ...

  list_assignments(id) {
    subs {
      
    }
}



--after
--before (late-after)

--flatten
--section

--dos2unix
--user
--verbose

--process [file] ???
--latest ???

Usage: vcollect [ - adflprsuv ] [assignment-name] [destination-subdirectory]

  +a [YYYY,MM,DD,HH:MM:SS] collect files submitted after the given date
  ?d [YYYY,MM,DD,HH:MM:SS] use the given due date instead of Vincents
  *f (flatten) collect only the single latest file renaming as username
  +l collect the latest submissions ignoring any due date
  ?p [file] process files after copying
  +r assume all files are ascii text and reformat them as Unix files
  +s organize submissions by section number
  +u [user-name] copy only files for the given user name
  +v  print information on each file copied.
